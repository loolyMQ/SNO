const n=async()=>{if(!("serviceWorker"in navigator))return null;try{const n=await navigator.serviceWorker.register("/sw.js",{scope:"/"});return n.addEventListener("updatefound",()=>{const e=n.installing;e.addEventListener("statechange",()=>{"installed"===e.state&&navigator.serviceWorker.controller&&t()})}),n}catch(n){return null}},t=()=>{window.dispatchEvent(new CustomEvent("sw:update-available")),"Notification"in window&&"granted"===Notification.permission&&new Notification("Обновление доступно",{body:"Доступна новая версия приложения. Обновите страницу.",icon:"/icon-192x192.png"})};export{n as r};
