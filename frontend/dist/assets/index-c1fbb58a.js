import{r as e,c as r,j as t}from"./chunk-85d168d5.js";import{E as o,a as n,L as s,N as i}from"./chunk-9f525b72.js";import{r as l}from"./chunk-5b2694a5.js";import"./chunk-f3af2d60.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)}).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();const a={},d=function(e,r,t){if(!r||0===r.length)return e();const o=document.getElementsByTagName("link");return Promise.all(r.map(e=>{if((e=function(e){return"/"+e}(e))in a)return;a[e]=!0;const r=e.endsWith(".css"),n=r?'[rel="stylesheet"]':"";if(!!t)for(let t=o.length-1;t>=0;t--){const n=o[t];if(n.href===e&&(!r||"stylesheet"===n.rel))return}else if(document.querySelector(`link[href="${e}"]${n}`))return;const s=document.createElement("link");return s.rel=r?"stylesheet":"modulepreload",r||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),r?new Promise((r,t)=>{s.addEventListener("load",r),s.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${e}`)))}):void 0})).then(()=>e()).catch(e=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=e,window.dispatchEvent(r),!r.defaultPrevented)throw e})},c=e.lazy(()=>d(()=>import("./Router-d93ac4a0.js"),["assets/Router-d93ac4a0.js","assets/chunk-85d168d5.js","assets/chunk-f3af2d60.js","assets/chunk-9f525b72.js","assets/chunk-5b2694a5.js"])),u=({user:e,onLogout:r})=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px",paddingBottom:"20px",borderBottom:"2px solid #f0f0f0"},children:[t.jsx("h1",{style:{color:"#333",margin:0,fontSize:"2.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"üó∫Ô∏è –ö–∞—Ä—Ç–∞ –Ω–∞—É–∫–∏"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("div",{style:{fontWeight:"bold",color:"#333"},children:e.name}),t.jsx("div",{style:{color:"#666",fontSize:"0.9rem"},children:e.email}),t.jsx("div",{style:{color:"ADMIN"===e.role?"#e74c3c":"#27ae60",fontSize:"0.8rem",fontWeight:"bold"},children:"ADMIN"===e.role?"üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä":"üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"})]}),t.jsx("button",{onClick:r,style:{background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"25px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(255, 107, 107, 0.3)"},onMouseOver:e=>e.target.style.transform="translateY(-2px)",onMouseOut:e=>e.target.style.transform="translateY(0)",children:"–í—ã–π—Ç–∏"})]})]}),g=({onLogin:r,loading:o})=>{const[n,s]=e.useState(""),[i,l]=e.useState("");return t.jsxs("form",{onSubmit:async e=>{e.preventDefault();const t=await r(n,i);t.success?(s(""),l("")):alert("–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: "+t.error)},style:{display:"flex",flexDirection:"column",gap:"20px"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#333",fontWeight:"bold"},children:"Email:"}),t.jsx("input",{type:"email",value:n,onChange:e=>s(e.target.value),required:!0,style:{width:"100%",padding:"15px",border:"2px solid #e9ecef",borderRadius:"10px",fontSize:"1rem",transition:"border-color 0.3s ease",boxSizing:"border-box"},onFocus:e=>e.target.style.borderColor="#667eea",onBlur:e=>e.target.style.borderColor="#e9ecef",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#333",fontWeight:"bold"},children:"–ü–∞—Ä–æ–ª—å:"}),t.jsx("input",{type:"password",value:i,onChange:e=>l(e.target.value),required:!0,style:{width:"100%",padding:"15px",border:"2px solid #e9ecef",borderRadius:"10px",fontSize:"1rem",transition:"border-color 0.3s ease",boxSizing:"border-box"},onFocus:e=>e.target.style.borderColor="#667eea",onBlur:e=>e.target.style.borderColor="#e9ecef",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ø–∞—Ä–æ–ª—å"})]}),t.jsx("button",{type:"submit",disabled:o,style:{background:o?"#ccc":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"15px",borderRadius:"10px",fontSize:"1.1rem",fontWeight:"bold",cursor:o?"not-allowed":"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)"},onMouseOver:e=>!o&&(e.target.style.transform="translateY(-2px)"),onMouseOut:e=>!o&&(e.target.style.transform="translateY(0)"),children:o?"–í—Ö–æ–¥...":"–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É"})]})};function x(){const{user:r,loading:o,login:n,logout:a,networkError:d,retryConnection:x}=(()=>{const[r,t]=e.useState(null),[o,n]=e.useState(!1),[s,i]=e.useState(null);return e.useEffect(()=>{const e=localStorage.getItem("token");e&&(n(!0),fetch("/api/auth/me",{headers:{Authorization:`Bearer ${e}`}}).then(e=>{if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);return e.json()}).then(e=>{e.success?(t(e.user),i(null)):localStorage.removeItem("token")}).catch(e=>{e.message.includes("NetworkError")||e.message.includes("Failed to fetch")?i(e.message):localStorage.removeItem("token")}).finally(()=>n(!1)))},[]),{user:r,loading:o,login:async(e,r)=>{n(!0),i(null);try{const o=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const n=await o.json();return n.success?(localStorage.setItem("token",n.token),localStorage.setItem("refreshToken",n.refreshToken),t(n.user),i(null),{success:!0}):{success:!1,error:n.error}}catch(o){return o.message.includes("NetworkError")||o.message.includes("Failed to fetch")?(i(o.message),{success:!1,error:"–û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É."}):{success:!1,error:o.message}}finally{n(!1)}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),t(null)},networkError:s,retryConnection:()=>{i(null),n(!1);const e=localStorage.getItem("token");e&&(n(!0),fetch("/api/auth/me",{headers:{Authorization:`Bearer ${e}`}}).then(e=>{if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);return e.json()}).then(e=>{e.success?(t(e.user),i(null)):localStorage.removeItem("token")}).catch(e=>{e.message.includes("NetworkError")||e.message.includes("Failed to fetch")?i(e.message):localStorage.removeItem("token")}).finally(()=>n(!1)))}}})(),[p,h]=e.useState("dashboard"),m=e=>{h(e)};return e.useEffect(()=>{l()},[]),!o||r||d?d&&!r?t.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:t.jsx("div",{style:{background:"white",borderRadius:"20px",padding:"40px",boxShadow:"0 20px 40px rgba(0,0,0,0.1)",maxWidth:"600px",width:"100%"},children:t.jsx(i,{message:"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É",onRetry:x})})}):r?t.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px",fontFamily:"Arial, sans-serif"},children:t.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",background:"white",borderRadius:"20px",padding:"40px",boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},children:[t.jsx(u,{user:r,onLogout:a}),t.jsx(e.Suspense,{fallback:t.jsx("div",{style:{textAlign:"center",padding:"60px 20px"},children:t.jsx(s,{message:"–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...",size:"large"})}),children:t.jsx(c,{currentRoute:p,user:r,onNavigate:m})})]})}):t.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Arial, sans-serif"},children:t.jsxs("div",{style:{background:"white",borderRadius:"20px",padding:"50px",boxShadow:"0 20px 40px rgba(0,0,0,0.1)",maxWidth:"500px",width:"100%",margin:"20px"},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:"40px"},children:[t.jsx("h1",{style:{color:"#333",margin:"0 0 10px 0",fontSize:"3rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"üó∫Ô∏è –ö–∞—Ä—Ç–∞ –Ω–∞—É–∫–∏"}),t.jsx("p",{style:{color:"#666",fontSize:"1.1rem",margin:0},children:"–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ"})]}),t.jsx(g,{onLogin:n,loading:o}),t.jsxs("div",{style:{marginTop:"30px",padding:"20px",background:"#f8f9fa",borderRadius:"10px",border:"1px solid #e9ecef"},children:[t.jsx("h4",{style:{margin:"0 0 15px 0",color:"#333"},children:"–¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã:"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",background:"white",borderRadius:"8px",border:"1px solid #dee2e6"},children:[t.jsxs("div",{children:[t.jsx("strong",{style:{color:"#e74c3c"},children:"üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"}),t.jsx("div",{style:{color:"#666",fontSize:"0.9rem"},children:"admin@science-map.com"})]}),t.jsx("div",{style:{color:"#27ae60",fontWeight:"bold"},children:"admin123"})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",background:"white",borderRadius:"8px",border:"1px solid #dee2e6"},children:[t.jsxs("div",{children:[t.jsx("strong",{style:{color:"#3498db"},children:"üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"}),t.jsx("div",{style:{color:"#666",fontSize:"0.9rem"},children:"user@science-map.com"})]}),t.jsx("div",{style:{color:"#27ae60",fontWeight:"bold"},children:"user123"})]})]})]})]})}):t.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(s,{message:"–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...",size:"large"})})}r.createRoot(document.getElementById("root")).render(t.jsxs(o,{children:[t.jsx(x,{}),t.jsx(n,{})]}));export{d as _};
